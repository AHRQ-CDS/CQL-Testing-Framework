---
name: Second example of using reusable resources

# Referenced resources don't have to be included in the test case file. They can exist 
# in separate YAML files as long as they are named under externalResourceLibraries.
externalResourceLibraries:
- reusable_resources
- more_resources

data:
-
  resourceType: Patient
  name: Fuller Jackson
  gender: male
  birthDate: 1954-02-16
# The `importAll` keyword will cause all referenced resources to be included.
-
  importAll: *painRelatedConditions
# The `iterateOver` keyword will cause a set of test cases to be created, each containing 
# a different one of the referenced resources.
-
  iterateOver: *nonOpioidMedicationOrders
-
  iterateOver: *nonOpioidMedicationStatements


results:
  # Cannot check for strict equality in this example, since each test case created by 
  # `iterateOver` has a different output summary.
  
  # Must verify certain output object properties by using `$should` expressions.
  # The following indicates that the Summary object should exist.
  Summary: $should exist
  # The following indicates that the these outputs should be arrays of length 1
  ReportConditionsAssociatedWithChronicPain: $should have length 1
  ReportRiskFactorsForOpioidRelatedHarms: $should have length 1
  ReportNonOpioidMedications: $should have length 2